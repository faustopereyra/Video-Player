{"version":3,"sources":["app.js"],"names":["player","document","querySelector","video","progressRange","progressBar","playBtn","getElementById","volumeIcon","volumeRange","volumeBar","currentTime","duration","speed","fullscreenBtn","clientId","state","ws","WebSocket","togglePlay","play","paused","payload","send","JSON","stringify","onmessage","message","response","parse","data","method","console","log","updatePlay","classList","replace","setAttribute","pause","displayTime","time","minutes","Math","floor","seconds","updateProgress","style","width","textContent","setProgress","e","newTime","offsetX","offsetWidth","lastVolume","changeVolume","volume","className","add","toggleMute","changeSpeed","playbackRate","value","openFullscreen","elem","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","closeFullscreen","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","remove","fullscreen","toggleFullscreen","addEventListener"],"mappings":"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","file":"app.479f0e98.js","sourceRoot":"..","sourcesContent":["//Save Elements\r\nconst player = document.querySelector(\".player\")\r\nconst video = document.querySelector(\"video\");\r\nconst progressRange = document.querySelector(\".progress-range\");\r\nconst progressBar = document.querySelector(\".progress-bar\");\r\nconst playBtn = document.getElementById(\"play-btn\");\r\nconst volumeIcon = document.getElementById(\"volume-icon\");\r\nconst volumeRange = document.querySelector(\".volume-range\");\r\nconst volumeBar = document.querySelector(\".volume-bar\");\r\nconst currentTime = document.querySelector(\".time-elapsed\");\r\nconst duration = document.querySelector(\".time-duration\");\r\nconst speed = document.querySelector(\".player-speed\")\r\nconst fullscreenBtn = document.querySelector(\".fullscreen\");\r\n\r\n\r\n//Server Logic\r\n\r\nlet clientId = null;\r\nconst state = {}\r\n\r\nlet ws = new WebSocket(\"ws://localhost:3000/\")\r\n\r\n\r\nconst togglePlay = () => {\r\n\r\n    let play = video.paused ? true : false;\r\n\r\n    const payload = {\r\n        \"method\": \"togglePlay\",\r\n        \"state\": {\r\n            ...state,\r\n            play: play\r\n        }\r\n    }\r\n\r\n    ws.send(JSON.stringify(payload))\r\n}\r\n\r\n//Get Server Data\r\nws.onmessage = message => {\r\n    const response = JSON.parse(message.data);\r\n\r\n    //conect\r\n    if (response.method === \"connect\") {\r\n        clientId = response.clientId;\r\n        console.log(\"Client id Set successfully \" + clientId)\r\n    }\r\n\r\n    //update\r\n    if (response.method === \"update\") {\r\n        state.play = response.state.play\r\n        updatePlay()\r\n    }\r\n}\r\n\r\n\r\n//Client Logic\r\n\r\n//Update Play\r\n\r\nconst updatePlay = () => {\r\n    if (state.play) {\r\n        video.play();\r\n        playBtn.classList.replace(\"fa-play\", \"fa-pause\");\r\n        playBtn.setAttribute(\"title\", \"Pause\")\r\n    } else {\r\n        video.pause();\r\n        playBtn.classList.replace(\"fa-pause\", \"fa-play\");\r\n        playBtn.setAttribute(\"title\", \"play\");\r\n    }\r\n}\r\n\r\n// Progress Bar \r\nconst displayTime = (time) => {\r\n    const minutes = Math.floor(time / 60);\r\n    let seconds = Math.floor(time % 60);\r\n    seconds = seconds > 9 ? seconds : `0${seconds}`\r\n    return `${minutes}:${seconds}`\r\n}\r\nconst updateProgress = () => {\r\n    progressBar.style.width = `${(video.currentTime / video.duration) * 100}%`\r\n    currentTime.textContent = `${displayTime(video.currentTime)}/`;\r\n    duration.textContent = `${displayTime(video.duration)}`;\r\n}\r\n\r\nconst setProgress = (e) => {\r\n    const newTime = e.offsetX / progressRange.offsetWidth;\r\n    progressBar.style.width = `${newTime * 100}%`\r\n    video.currentTime = newTime * video.duration;\r\n}\r\n// Volume Controls \r\nlet lastVolume = 1;\r\n\r\nconst changeVolume = (e) => {\r\n    let volume = e.offsetX / volumeRange.offsetWidth;\r\n\r\n    if (volume < 0.1) {\r\n        volume = 0;\r\n    }\r\n    if (volume > 0.9) {\r\n        volume = 1;\r\n    }\r\n    volumeBar.style.width = `${volume * 100}%`;\r\n    video.volume = volume;\r\n\r\n    volumeIcon.className = \"\";\r\n    if (volume > 0.7) {\r\n        volumeIcon.classList.add(\"fas\", \"fa-volume-up\");\r\n    } else if (volume < 0.7 && volume > 0) {\r\n        volumeIcon.classList.add(\"fas\", \"fa-volume-down\");\r\n    } else {\r\n        volumeIcon.classList.add(\"fas\", \"fa-volume-off\");\r\n    }\r\n\r\n    lastVolume = volume;\r\n}\r\n\r\nconst toggleMute = () => {\r\n    volumeIcon.className = \"\";\r\n    if (video.volume) {\r\n        lastVolume = video.volume;\r\n        video.volume = 0;\r\n        volumeBar.style.width = 0;\r\n        volumeIcon.classList.add(\"fas\", \"fa-volume-mute\");\r\n        volumeIcon.setAttribute(\"title\", \"Unmute\")\r\n    } else {\r\n        video.volume = lastVolume;\r\n        volumeBar.style.width = `${lastVolume * 100}%`\r\n        volumeIcon.classList.add(\"fas\", \"fa-volume-up\");\r\n        volumeIcon.setAttribute(\"title\", \"Mute\")\r\n    }\r\n}\r\n\r\n// Change Playback Speed \r\nconst changeSpeed = () => {\r\n    video.playbackRate = speed.value\r\n}\r\n\r\n\r\n// Fullscreen \r\n\r\n/* View in fullscreen */\r\nfunction openFullscreen(elem) {\r\n    if (elem.requestFullscreen) {\r\n        elem.requestFullscreen();\r\n    } else if (elem.mozRequestFullScreen) { /* Firefox */\r\n        elem.mozRequestFullScreen();\r\n    } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari and Opera */\r\n        elem.webkitRequestFullscreen();\r\n    } else if (elem.msRequestFullscreen) { /* IE/Edge */\r\n        elem.msRequestFullscreen();\r\n    }\r\n    video.classList.add(\"video-fullscreen\")\r\n}\r\n\r\n/* Close fullscreen */\r\nfunction closeFullscreen() {\r\n    if (document.exitFullscreen) {\r\n        document.exitFullscreen();\r\n    } else if (document.mozCancelFullScreen) { /* Firefox */\r\n        document.mozCancelFullScreen();\r\n    } else if (document.webkitExitFullscreen) { /* Chrome, Safari and Opera */\r\n        document.webkitExitFullscreen();\r\n    } else if (document.msExitFullscreen) { /* IE/Edge */\r\n        document.msExitFullscreen();\r\n    }\r\n    video.classList.remove(\"video-fullscreen\")\r\n}\r\n\r\nlet fullscreen = false;\r\n\r\nconst toggleFullscreen = () => {\r\n    if (!fullscreen) {\r\n        openFullscreen(player);\r\n    } else {\r\n        closeFullscreen();\r\n    }\r\n    fullscreen = !fullscreen;\r\n}\r\n\r\n//Event Listeners\r\n\r\nplayBtn.addEventListener(\"click\", togglePlay);\r\nvideo.addEventListener(\"click\", togglePlay);\r\nvideo.addEventListener(\"timeupdate\", updateProgress);\r\nvideo.addEventListener(\"canplay\", updateProgress);\r\nprogressRange.addEventListener(\"click\", setProgress);\r\nvolumeRange.addEventListener(\"click\", changeVolume);\r\nvolumeIcon.addEventListener(\"click\", toggleMute);\r\nspeed.addEventListener(\"change\", changeSpeed);\r\nfullscreenBtn.addEventListener(\"click\", toggleFullscreen)"]}